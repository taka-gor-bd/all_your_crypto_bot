<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title id="appTitle">SHIB Earning Bot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src='//libtl.com/sdk.js' data-zone='9709495' data-sdk='show_9709495'></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading"></div>
            <p>অ্যাপ লোড হচ্ছে...</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 id="appName">SHIB Earning Bot</h1>
            <p class="subtitle" id="coinName">SHIB কয়েন আয় করুন</p>
        </header>

        <!-- User Profile Section -->
        <div class="card">
            <div class="card-header">
                <div class="user-profile">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <div class="user-info">
                        <h3 id="userName">ব্যবহারকারী</h3>
                        <p id="userStatus">@user</p>
                        <span id="premiumBadge" class="premium-badge" style="display: none;">প্রিমিয়াম</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Balance Card -->
        <div class="card balance-card">
            <h3 class="balance-label">মোট ব্যালেন্স</h3>
            <div class="balance-amount" id="totalBalance">0</div>
            <p class="balance-label">আজকের আয়: <span id="todayEarning">0</span></p>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-value" id="adsWatched">0</div>
                <div class="stat-label">বিজ্ঞাপন দেখেছেন</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalReferrals">0</div>
                <div class="stat-label">রেফারেল</div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <div class="nav-tab active" onclick="showTab('home')">হোম</div>
            <div class="nav-tab" onclick="showTab('tasks')">টাস্ক</div>
            <div class="nav-tab" onclick="showTab('referral')">রেফারেল</div>
            <div class="nav-tab" onclick="showTab('withdraw')">উইথড্র</div>
            <div class="nav-tab" onclick="showTab('settings')">সেটিংস</div>
        </div>

        <!-- Home Tab -->
        <div id="homeTab" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">দৈনিক অগ্রগতি</h3>
                    <span id="dailyProgress">0/10</span>
                </div>
                <div id="taskList" class="task-list">
                    <!-- Tasks will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Tasks Tab -->
        <div id="tasksTab" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">উপলব্ধ টাস্ক</h3>
                </div>
                <div id="allTasksList" class="task-list">
                    <!-- All tasks will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Referral Tab -->
        <div id="referralTab" class="tab-content" style="display: none;">
            <!-- Enhanced referral system with multi-level tracking -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">রেফারেল প্রোগ্রাম</h3>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="totalRefs">0</div>
                        <div class="stat-label">মোট রেফারেল</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="activeRefs">0</div>
                        <div class="stat-label">সক্রিয় রেফারেল</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="referralEarnings">0</div>
                        <div class="stat-label">রেফারেল আয়</div>
                    </div>
                </div>
            </div>

            <!-- Referral Code Input (for users who joined without referral) -->
            <div id="referralCodeSection" class="card" style="display: none;">
                <div class="card-header">
                    <h3 class="card-title">রেফারেল কোড যোগ করুন</h3>
                </div>
                <p>আপনি রেফারেল ছাড়া যোগ দিয়েছেন। এখনও রেফারেল কোড ব্যবহার করতে পারেন:</p>
                <div class="form-group">
                    <input type="text" id="referralCodeInput" class="form-input" placeholder="রেফারেল কোড লিখুন">
                    <button class="btn btn-primary btn-full" onclick="applyReferralCode()">কোড ব্যবহার করুন</button>
                </div>
            </div>

            <!-- Referral Link Sharing -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">আপনার রেফারেল লিংক</h3>
                </div>
                <p>বন্ধুদের আমন্ত্রণ জানান এবং প্রতি রেফারেলে বোনাস পান!</p>
                <div class="form-group">
                    <input type="text" id="referralLink" class="form-input" readonly>
                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="copyReferralLink()">কপি করুন</button>
                        <button class="btn btn-primary" onclick="shareToTelegram()">শেয়ার করুন</button>
                    </div>
                </div>
            </div>

            <!-- Referral Levels -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">রেফারেল লেভেল</h3>
                </div>
                <div class="referral-levels">
                    <div class="level-item">
                        <div class="level-info">
                            <h4>লেভেল ১</h4>
                            <p>সরাসরি রেফারেল</p>
                        </div>
                        <div class="level-reward">৫০ কয়েন</div>
                    </div>
                    <div class="level-item">
                        <div class="level-info">
                            <h4>লেভেল ২</h4>
                            <p>রেফারেলের রেফারেল</p>
                        </div>
                        <div class="level-reward">২৫ কয়েন</div>
                    </div>
                    <div class="level-item">
                        <div class="level-info">
                            <h4>লেভেল ৩</h4>
                            <p>তৃতীয় স্তরের রেফারেল</p>
                        </div>
                        <div class="level-reward">১০ কয়েন</div>
                    </div>
                </div>
            </div>

            <!-- Referral History -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">রেফারেল ইতিহাস</h3>
                </div>
                <div id="referralHistory" class="referral-history">
                    <p class="text-center">এখনও কোনো রেফারেল নেই</p>
                </div>
            </div>
        </div>

        <!-- Withdraw Tab -->
        <div id="withdrawTab" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">টাকা উইথড্র করুন</h3>
                </div>
                <div class="form-group">
                    <label class="form-label">উইথড্র মেথড</label>
                    <select id="withdrawMethod" class="form-input">
                        <option value="bkash">bKash</option>
                        <option value="nagad">Nagad</option>
                        <option value="rocket">Rocket</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">অ্যাকাউন্ট নম্বর</label>
                    <input type="text" id="accountNumber" class="form-input" placeholder="01XXXXXXXXX">
                </div>
                <div class="form-group">
                    <label class="form-label">পরিমাণ</label>
                    <input type="number" id="withdrawAmount" class="form-input" placeholder="সর্বনিম্ন ১০০০">
                </div>
                <button class="btn btn-primary btn-full" onclick="requestWithdrawal()">উইথড্র রিকুয়েস্ট করুন</button>
            </div>

            <!-- Enhanced subscription system with blue tick verification -->
            <div class="card subscription-card">
                <div class="card-header">
                    <h3 class="card-title">প্রিমিয়াম সাবস্ক্রিপশন</h3>
                </div>
                
                <!-- Subscription Plans -->
                <div class="subscription-plans">
                    <div class="plan-item premium-plan">
                        <div class="plan-header">
                            <h4>প্রিমিয়াম প্ল্যান</h4>
                            <div class="plan-price">৫০০ কয়েন</div>
                        </div>
                        <div class="plan-benefits">
                            <ul>
                                <li>✓ কোনো বিজ্ঞাপন নেই</li>
                                <li>✓ বেশি দৈনিক সীমা</li>
                                <li>✓ অগ্রাধিকার সাপোর্ট</li>
                                <li>✓ ব্লু টিক ভেরিফিকেশন</li>
                                <li>✓ বিশেষ বোনাস</li>
                            </ul>
                        </div>
                        <button class="btn btn-primary btn-full" onclick="subscribeToPremium()">প্রিমিয়াম কিনুন</button>
                    </div>

                    <div class="plan-item blue-tick-plan">
                        <div class="plan-header">
                            <h4>ব্লু টিক ভেরিফিকেশন</h4>
                            <div class="plan-price">২০০ টাকা</div>
                        </div>
                        <div class="plan-benefits">
                            <ul>
                                <li>✓ ব্লু টিক ভেরিফিকেশন</li>
                                <li>✓ প্রোফাইল হাইলাইট</li>
                                <li>✓ বিশ্বস্ততার চিহ্ন</li>
                                <li>✓ ১ বছরের জন্য বৈধ</li>
                            </ul>
                        </div>
                        <button class="btn btn-secondary btn-full" onclick="requestBlueTick()">ব্লু টিক রিকুয়েস্ট</button>
                    </div>
                </div>

                <!-- Current Subscription Status -->
                <div id="subscriptionStatus" class="subscription-status">
                    <h4>বর্তমান স্ট্যাটাস</h4>
                    <div id="currentPlan" class="current-plan">
                        <span class="status-text">ফ্রি প্ল্যান</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settingsTab" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">সেটিংস</h3>
                </div>
                <div class="form-group">
                    <label class="form-label">ভাষা</label>
                    <select id="languageSelect" class="form-input">
                        <option value="bn">বাংলা</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">থিম</label>
                    <select id="themeSelect" class="form-input">
                        <option value="light">হালকা</option>
                        <option value="dark">গাঢ়</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" id="notificationsToggle" checked> নোটিফিকেশন
                    </label>
                </div>
                <button class="btn btn-primary btn-full" onclick="saveSettings()">সেটিংস সেভ করুন</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/database.js"></script>
    <script src="js/telegram.js"></script>
    <script src="js/referral.js"></script>
    <script src="js/subscription.js"></script>
    <script src="js/realtime.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
